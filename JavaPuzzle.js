//Instanziare gli elementi per le domande
//url('../images/divbg.png')
answ1 = "Un filmato girato nel 1918 ci mostra gli aviatori come veri e propri cavalieri medievali, uniti da cameratismo e spirito d’avventura. Qual è, in generale, lo sguardo del cinema coevo alla guerra? ";
q1 = ["Uno sguardo ambivalente, che accosta il mito dei cavalieri a moderni fautori di morte.", "Sottolinea la lealtà degli aviatori come moderni cavalieri.", "Giustifica la crudeltà dei bombardamenti.", "Uno sguardo indeciso sulle nuove tecnologie belliche."];
c1 = "Uno sguardo ambivalente, che accosta il mito dei cavalieri a moderni fautori di morte.";
im1 = "puzzle1/im1.jpg";
pdf1="pdf/WW1_Aviatori.pdf";

answ2 = "Manfred von Richthofen, aviatore e ufficiale tedesco nella Prima guerra mondiale, detto il Barone Rosso, nel 1916 prende parte al primo vero combattimento, tracciando una carriera leggendaria che conta ben ottanta aerei nemici abbattuti.Quale modello di soldato rappresenta il Barone Rosso?";
q2 = ["Rappresenta il soldato che è in grado di riconvertirsi alla nuova tecnologia.", "Rappresenta l’ideale del soldato in ogni guerra.", "Rappresenta l’immagine di fedeltà alla patria.", "Rappresenta il soldato impavido che sfida gli avversari."];
c2 = "Rappresenta il soldato che è in grado di riconvertirsi alla nuova tecnologia.";
im2 = "puzzle1/im2.jpg";
pdf2="pdf/WW1_BARONE ROSSO.pdf";

answ3 = "Durante la Prima guerra mondiale le armi erano tecnologicamente avanzate e potenti.Il soldato che manovra un cannone, quasi un’appendice dell’arma che lo offusca con la sua mole, su quale aspetto può far riflettere?";
q3 = ["E’ un soldato con un alto potere di distruzione e di responsabilità, poiché non combatte in uno scontro diretto, ma uccide a distanza.", "L’orgoglio di possedere uno strumento tecnologico così potente.", "Il rischio di non essere in grado di far funzionare un’arma così grande.", "L’abbigliamento inadeguato per lo scopo."];
c3 = "E’ un soldato con un alto potere di distruzione e di responsabilità, poiché non combatte in uno scontro diretto, ma uccide a distanza.";
im3 = "puzzle1/im3.jpg";
pdf3="pdf/WW1_CANNONI.pdf";

answ4 = "Il carro armato MK è tra i più corazzati, resistenti e forti del primo conflitto mondiale. Nella foto è rappresentato mentre sta per superare in salita un passaggio in notevole pendenza. Il messaggio che vuole dare è di invincibilità e superiorità tecnologica in grado si sfidare persino la forza di gravità. Quale figura del soldato possiamo dedurne?";
q4 = ["I soldati sono strettamente dipendenti dalla tecnologia bellica: il carro inglese MK IV scavalca le trincee e fa passare dietro di sé i plotoni di terra.", "I soldati sono disarmati e festeggiano la vittoria.", "I soldati non si sentono al sicuro perché non conoscono questa nuova macchina di guerra.", "La foto è finta."];
c4 = "I soldati sono strettamente dipendenti dalla tecnologia bellica: il carro inglese MK IV scavalca le trincee e fa passare dietro di sé i plotoni di terra.";
im4 = "puzzle1/im4.jpg";
pdf4="pdf/WW1_CARRO MK IV.pdf";

answ5 = " Nel 1908 la fabbrica di armamenti Krupp, in Germania, progettò un pezzo d'artiglieria capace di sfondare tre metri di cemento armato e abbattere le torrette in acciaio al nichel delle fortificazioni francesi. Quale messaggio trasmette l’immagine?";
q5 = ["La potenza dell’ingegneria tedesca e senso di invincibilità dei soldati, ma anche soggezione per la potenza dell’arma.","La fatica di manovrare un’arma così pesante.", "Il ricordo della figlia maggiore di Krupp. ", "Lo zelo dei tedeschi in guerra."];
c5 = "La potenza dell’ingegneria tedesca e senso di invincibilità dei soldati, ma anche soggezione per la potenza dell’arma.";
im5 = "puzzle1/im5.jpg";
pdf5="pdf/WW1_Grande Berta.pdf";

answ6 = "Il libro del collettivo Wu Ming racconta quattro vite sul fronte della Grande Guerra: presenta al lettore i metodi e le strategie che i soldati adottavano per scappare dall'indimenticabile orrore della guerra e, soprattutto, della trincea.Molte asserzioni nel libro rimandano all'estraneità e all’ignoranza dei soldati sul combattere, ad esempio: «La cosa che Adelmo non capiva era il perché si dovesse conquistare la cima». In copertina due soldati tedeschi indossano uno strumento pensato per individuare e neutralizzare l’invisibile ovunque, l’aereo da guerra, che può piombarti addosso in qualunque momento, rapido, e da qualunque direzione. Quale visione sulla Grade Guerra sottolineano gli autori? ";
q6 = ["Offrono un punto di vista insolito sulla Grande Guerra, inquadrano un aspetto poco noto, con una sfumatura umoristica e surreale.","La guerra rende pazzi.", "I soldati in trincea avevano la possibilità di sperimentare nuovissime invenzioni tecnologicamente avanzate.", "I soldati in trincea avevano la possibilità di sperimentare nuovissime invenzioni tecnologicamente avanzate."];
c6 = "Offrono un punto di vista insolito sulla Grande Guerra, inquadrano un aspetto poco noto, con una sfumatura umoristica e surreale.";
im6 = "puzzle1/im6.jpg";
pdf6="pdf/WW1_Invisibile Ovunque.pdf";

answ7 = "Il soldato francese indossa il moderno equipaggiamento, maschera anti-gas e altri dispositivi, per resistere agli attacchi chimici durante la Prima guerra mondiale.Quale immagine del soldato si può dedurre?";
q7 = ["La guerra chimica introduce un elemento di novità rispetto al passato, i gas mortali, perciò il soldato si adegua all’avanzamento scientifico.","I soldati hanno paura del nemico e si travestono.", "I nemici sono senza scrupoli e bisogna adattarsi.", "La maschera anti-gas garantisce la vittoria della guerra."];
c7 = "La guerra chimica introduce un elemento di novità rispetto al passato, i gas mortali, perciò il soldato si adegua all’avanzamento scientifico.";
im7 = "puzzle1/im7.jpg";
pdf7="pdf/WW1_MASCHERA ANTIGAS.pdf";

answ8 = "Il testo del professor De Luna spiega l’evoluzione tecnologica nella Prima guerra mondiale. Il soldato vive una guerra diversa da quelle combattute in passato: le armi sono più potenti e il rischio di morire è molto più alto, mentre la guerra di trincea inaugura la figura del soldato massa. Quali sono i principali sentimenti che provano i soldati durante questa esperienza militare?";
q8 = ["Angoscia da spaesamento nel soldato di trincea. Onnipotenza degli aviatori che si producono in spettacolari duelli nell’aria.","Individualismo e solitudine.", "Rabbia e frustrazione per l’utilizzo di armi ancora arretrate per l’epoca.", "Gioia di partecipare a un evento storico tanto importante. "];
c8 = "Angoscia da spaesamento nel soldato di trincea. Onnipotenza degli aviatori che si producono in spettacolari duelli nell’aria.";
im8 = "puzzle1/im8.jpg";
pdf8="pdf/WW1_Nuove Armi.pdf";

answ9 = "Il pioniere dell’aviazione, Maggiore Robert Loraine, uno dei piloti più amati della Gran Bretagna, primo a volare attraverso la Manica irlandese e primo ad atterrare sull'isola di Wight nel 1910.Quali elementi di diversità testimonia l’immagine rispetto alla figura classica del soldato? ";
q9 = ["Ritrae la conquista dei cieli e l’innovazione nel settore bellico per sorprendere il nemico dall’alto.","Ritrae la mitragliatrice con la quale era molto bravo a sparare.", "E’ triste nel ruolo di pilota che gli è stato assegnato.", "Indossa un cappello di foggia diversa rispetto al passato."];
c9 = "Ritrae la conquista dei cieli e l’innovazione nel settore bellico per sorprendere il nemico dall’alto."
im9 = "puzzle1/im9.jpg";
pdf9="pdf/WW1_Story of the Daredevil.pdf";

answ10 = "Le trincee sono uno dei simboli della Prima guerra mondiale, combattuta principalmente da due opposti schieramenti. Quali condizioni di vita sostenevano i soldati?";
q10 = ["Il soldato combatte in condizioni diverse da quelle precedenti: con un rischio elevato di morte, ma anche ben equipaggiato.","I soldati costituivano una comunità felice e ben organizzata.", "Lo Stato provvedeva alle abbondanti razioni di cibo per i pasti sempre lauti.", "I soldati avevano ricevuto una preparazione sufficiente ad affrontare le condizioni di vita nelle trincee."];
c10 = "Il soldato combatte in condizioni diverse da quelle precedenti: con un rischio elevato di morte, ma anche ben equipaggiato."
im10 = "puzzle1/im10.jpg";
pdf10="pdf/WW1_TRINCEE.pdf";

answ11 = "Una storia di destini incrociati in un mondo sconvolto dalla guerra. Tutti i personaggi del gioco cercano di sopravvivere all’orrore delle trincee e le loro vite si intrecciano, si legano, si aiutano nel tentativo di non perdere la propria umanità di fronte agli orrori della guerra.Quale caratteristica dei soldati emerge dal gioco?";
q11 = ["L'anima del soldato ovvero le sue emozioni, le sue paure, i suoi pensieri; quanto perde o rischia: la sua vita o quella dei suoi cari.","Nessun aspetto particolarmente importante.", "Le armi, le uniformi, gli scenari della Prima guerra mondiale. ", "La perdita dell’amore verso gli altri."];
c11 = "L'anima del soldato ovvero le sue emozioni, le sue paure, i suoi pensieri; quanto perde o rischia: la sua vita o quella dei suoi cari."
im11 = "puzzle1/im11.jpg";
pdf11="pdf/WW1_Valiant Hearts.pdf";

answ12 = "La descrizione dell’Uniforme utilizzata ai tempi riferisce di una giubba solitamente larga «ma in modo che acconci con garbo alla persona».Come descriveresti il tipo di soldato mostrato dall’uniforme?";
q12 = ["Si tratta del classico soldato dell’immaginario collettivo: uniforme verde, comoda, ampia.","Si tratta di un soldato moderno e alla moda.", "Si tratta di un soldato ancora legato ad antiche tradizioni di guerra.", "L’uniforme non è importante ai fini della vittoria."];
c12 = "Si tratta del classico soldato dell’immaginario collettivo: uniforme verde, comoda, ampia.";
im12 = "puzzle1/im12.jpg";
pdf12="pdf/WWI_Prima_Guerra_Mondiale_Uniformi_Militari.pdf";

AllAnsw = [answ1, answ2,answ3,answ4,answ5,answ6,answ7,answ8,answ9,answ10,answ11,answ12];
AllIm = [im1, im2,im3,im4,im5,im6,im7,im8,im9,im10,im11,im12];
AllQ = [q1, q2, q3,q4,q5,q6,q7,q8,q9,q10,q11,q12];
AllC = [c1, c2, c3,c4,c5,c6,c7,c8,c9,c10,c11,c12];
AllPdf=[pdf1,pdf2,pdf3,pdf4,pdf5,pdf6,pdf7,pdf8,pdf9,pdf10,pdf11,pdf12];

// Evt--> Events
var CorrQ = 0;
var Piece = document.getElementsByClassName('movil'); //Add on img


//Generare AnswerDiv
function Genera() {
	for (var i = 0; i < Piece.length; i++) {
		Piece[i].setAttribute("width", 200); //The width of img
		Piece[i].setAttribute("height", 114.5); //The width of img
		Piece[i].setAttribute("x", Math.floor((Math.random() * 10) + 1));
		Piece[i].setAttribute("y", Math.floor((Math.random() * 600) + 1));
		Piece[i].setAttribute("onmousedown", "SelectElement(evt)");
	}

	Div = document.getElementById("AnswerDiv");
	for (var i = 0; i < 12; i++) {
		var DivAnsw = document.createElement("div");
		DivAnsw.className = "Hide";
		DivAnsw.id = "AnswerDivid" + (i);

		var Form = document.createElement("form"); // Create the FORM WITH RADIO, BUTTON QUESTION AND IMG

		var Risp = AllQ[i];
		shuffle(Risp);

		var Img = document.createElement("img");
		Img.src = AllIm[i];
		Form.appendChild(Img);
		var mybr = document.createElement('br');
		Form.appendChild(mybr);
		var PDF=document.createElement("a");
		PDF.href=AllPdf[i];
		PDF.target="_blank";
		PDF.innerHTML="Vedi scheda di analisi";
		Form.appendChild(PDF);
		mybr =document.createElement('br');
		Form.appendChild(mybr);
		Form.appendChild(document.createElement("h1").appendChild(document.createTextNode(AllAnsw[i])));//Add ANSWER


		var List =
			document.createElement("ul");
		for (var x = 0; x < 4; x++) {
			var Lbl = document.createElement("li");
			var Radio = document.createElement("INPUT");
			Radio.setAttribute("type", "radio");
			Lbl.innerHTML = Risp[x];
			Radio.value = Risp[x];
			Radio.id = "Answ" + (x + 1) + (i + 1); //Answ NDom NQuadro
			Radio.name = "Answ" + (i + 1);
			Lbl.appendChild(Radio);
			List.appendChild(Lbl);
			Form.appendChild(List);

		}
		var Btn = document.createElement("button");
		//Btn.setAttribute("type", "button");
		Btn.innerHTML = "Conferma risposta";
		Btn.id = "btn" + (i);
		Btn.addEventListener("click", function () { CheckAnswer(this); });

		DivAnsw.appendChild(Form);
		DivAnsw.appendChild(Btn);
		Div.appendChild(DivAnsw);

	}

}
function shuffle(array) {
	var currentIndex = array.length, temporaryValue, randomIndex;

	// While there remain elements to shuffle...
	while (0 !== currentIndex) {

		// Pick a remaining element...
		randomIndex = Math.floor(Math.random() * currentIndex);
		currentIndex -= 1;

		// And swap it with the current element.
		temporaryValue = array[currentIndex];
		array[currentIndex] = array[randomIndex];
		array[randomIndex] = temporaryValue;
	}

	return array;
}

var elementSelect = 0;
var currentX = 0;
var currentY = 0;
var currentPosX = 0;
var currentPosY = 0;

function SelectElement(evt) {
	elementSelect = Reorder(evt); //Select the member
	currentX = evt.clientX;
	currentY = evt.clientY;
	currentPosx = parseFloat(elementSelect.getAttribute("x"));
	currentPosy = parseFloat(elementSelect.getAttribute("y"));
	elementSelect.setAttribute("onmousemove", "MoveElement(evt)");
}

function MoveElement(evt) {
	var dx = evt.clientX - currentX; //Calculate the pos of the piece
	var dy = evt.clientY - currentY;
	currentPosx = currentPosx + dx;
	currentPosy = currentPosy + dy;
	elementSelect.setAttribute("x", currentPosx);
	elementSelect.setAttribute("y", currentPosy);
	currentX = evt.clientX;        //Save pos of the piece
	currentY = evt.clientY;
	elementSelect.setAttribute("onmouseout", "DeselectElement(evt)");
	elementSelect.setAttribute("onmouseup", "DeselectElement(evt)");
	Check(); //Check if it is on position
}

function DeselectElement(evt) {
	testing(GetFather(evt));
	if (elementSelect != 0) {
		elementSelect.removeAttribute("onmousemove");
		elementSelect.removeAttribute("onmouseout");
		elementSelect.removeAttribute("onmouseup");
		elementSelect = 0;
	}
}

function Reorder(evt) {
	var Intorno = document.getElementById('intorno');
	var padre = evt.target.parentNode; //Select the piece
	var clone = padre.cloneNode(true);
	//Bring it UP!
	var id = padre.getAttribute("id");
	Intorno.removeChild(document.getElementById(id));
	Intorno.appendChild(clone);
	return Intorno.lastChild.firstChild;  //Return the selected piece
}
//return the father of the img
function GetFather(evt) {
	var padre = evt.target.parentNode; //Select the piece
	//Bring it UP!
	var id = padre.getAttribute("id");
	return id;  //Return the selected piece
}

//The final value img
var origX = [200, 400, 600, 200, 400, 600, 200, 400, 600,200, 400, 600];
var origY = [100, 100, 100, 214, 214, 214,328,328,328, 442, 442, 442];

function Check() { //Check if the piece is in some place where u can pose the img
	for (var i = 0; i < Piece.length; i++) {
		if (Math.abs(currentPosx - origX[i]) < 15 && Math.abs(currentPosy - origY[i]) < 15) { //It gives to you 15 px of range
			elementSelect.setAttribute("x", origX[i]);
			elementSelect.setAttribute("y", origY[i]);
		}
	}
}

var win = document.getElementById("win");

function testing(id) {
	var Father=document.getElementById(id);
	var posx = parseFloat(Father.firstChild.getAttribute("x"));
	var posy = parseFloat(Father.firstChild.getAttribute("y"));
	if (origX[id] == posx && origY[id] == posy) {
		ShowAnswer(id);
	}
	else
	{
		var AllHide = document.getElementsByClassName("Hide");
		for (var i = 0; i < AllHide.length; i++) {
			AllHide[i].style.display = "none";
		}
	}
}
function CheckAnswer(ID) {
	var Numb;
	if(ID.id.length==4)
	{
	Numb = ID.id.substr(ID.id.length - 1)
	}
	else
	{
	Numb = ID.id.substr(ID.id.length - 2)
	}
    var div = document.getElementById("AnswerDivid" + Numb);
    var Radio = div.getElementsByTagName("INPUT");
    //alert(Radio.length);
    var ok = false;
    for (var i = 0; i < Radio.length && !ok; i++) {
        //alert(Radio[i].id+" "+Radio[i].checked);
        if (Radio[i].checked) {
            //alert(AllC[(ID.id.substr(ID.id.length - 1)) - 1]);
            if (Radio[i].value == AllC[Numb]) {
                ok = true;
            }
            //alert("VINTO");
        }
        //alert(Radio.length);
    }
    if (ok) {
		alert("Risposta Esatta!");
		div.style.display = "none";
		CorrQ=CorrQ+1;
		var Father=document.getElementById(Numb);
		//alert(Numb);
		Father.lastChild.setAttribute("onmousedown", "");
		if(CorrQ==12)
		{
			window.location.href = 'puzzle1_vittoria.html';
		}
    }
    else {
		alert("Risposta sbagliata!");
		div.style.display = "none";
		var Father=document.getElementById(Numb);
		var Piece=Father.lastChild;
		Piece.setAttribute("x", Math.floor((Math.random() * 500) + 1));
		Piece.setAttribute("y", Math.floor((Math.random() * 409) + 1));
    }
}
function ShowAnswer(Im) {
    var AllHide = document.getElementsByClassName("Hide");
    for (var i = 0; i < AllHide.length; i++) {
        AllHide[i].style.display = "none";
    }
	var div = document.getElementById("AnswerDivid" + Im);
	div.style.display = "block";
}